<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>界面管理 UI | MiniExtend</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="一个为迷你世界脚本设计的Lua库">
    
    <link rel="preload" href="/MiniExtendDoc/assets/css/0.styles.fd811cd1.css" as="style"><link rel="preload" href="/MiniExtendDoc/assets/js/app.34877e6c.js" as="script"><link rel="preload" href="/MiniExtendDoc/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/MiniExtendDoc/assets/js/14.67a40162.js" as="script"><link rel="prefetch" href="/MiniExtendDoc/assets/js/10.151a4c62.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/11.1a4ac75d.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/12.5493479e.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/13.82cf42eb.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/15.300bd2c9.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/16.a4a2400c.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/17.e8a5fd42.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/18.39d3c67a.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/3.40515bec.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/4.94733d25.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/5.2ea06e07.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/7.7124ad08.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/8.eebc99db.js"><link rel="prefetch" href="/MiniExtendDoc/assets/js/9.8b46da46.js">
    <link rel="stylesheet" href="/MiniExtendDoc/assets/css/0.styles.fd811cd1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/MiniExtendDoc/" class="home-link router-link-active"><!----> <span class="site-name">MiniExtend</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/MiniExtendDoc/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/MiniExtendDoc/api/" class="nav-link router-link-active">
  API参考
</a></div> <a href="https://github.com/0-0000/MiniExtend" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/MiniExtendDoc/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/MiniExtendDoc/api/" class="nav-link router-link-active">
  API参考
</a></div> <a href="https://github.com/0-0000/MiniExtend" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/MiniExtendDoc/guide/" class="sidebar-link">快速上手</a></li><li><a href="/MiniExtendDoc/guide/starter.html" class="sidebar-link">简介与约定</a></li><li><a href="/MiniExtendDoc/guide/environment.html" class="sidebar-link">环境搭建</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MiniExtend API</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/MiniExtendDoc/api/" aria-current="page" class="sidebar-link">简介与约定</a></li><li><a href="/MiniExtendDoc/api/core.html" class="sidebar-link">核心环境 Core</a></li><li><a href="/MiniExtendDoc/api/log.html" class="sidebar-link">日志管理 Log</a></li><li><a href="/MiniExtendDoc/api/time.html" class="sidebar-link">游戏时间 Time</a></li><li><a href="/MiniExtendDoc/api/object.html" class="sidebar-link">对象管理 Object</a></li><li><a href="/MiniExtendDoc/api/event.html" class="sidebar-link">事件管理 Event</a></li><li><a href="/MiniExtendDoc/api/ui.html" aria-current="page" class="active sidebar-link">界面管理 UI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/MiniExtendDoc/api/ui.html#约定" class="sidebar-link">约定</a></li><li class="sidebar-sub-header"><a href="/MiniExtendDoc/api/ui.html#函数介绍" class="sidebar-link">函数介绍</a></li></ul></li></ul></section></li><li><a href="/MiniExtendDoc/changelog.html" class="sidebar-link">更新日志</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="miniextend-ui"><a href="#miniextend-ui" class="header-anchor">#</a> MiniExtend UI</h1> <p>对应源文件：<code>ui.lua</code></p> <p>MiniExtend UI 前身为 <code>Customui</code> ，但以面向对象方式描述界面与元件，且支持 <a href="/MiniExtendDoc/api/object.html">MiniExtend Object</a> 。</p> <h2 id="约定"><a href="#约定" class="header-anchor">#</a> 约定</h2> <p>大多数 <code>UI</code> 下的函数都会包含一个 <code>playerid</code> 可选参数，它表示响应该操作的玩家 id 。该参数不会被检查，如果 <code>playerid</code> 的布尔值为 <code>false</code> ，则以 <code>objid</code> 代替。</p> <p><code>UI</code> 下的所有未表明返回值的函数或方法，一律返回 <code>true</code> 表示<span title="调用 API 成功不一定代表函数正确工作">调用 API 成功</span>，返回 <code>false</code> 表示<u title="有任何一部分执行失败，即视为全部失败">失败</u>。</p> <h2 id="函数介绍"><a href="#函数介绍" class="header-anchor">#</a> 函数介绍</h2> <h3 id="ui-getrootsize"><a href="#ui-getrootsize" class="header-anchor">#</a> <code>UI.getRootSize</code></h3> <p>获取自定义 UI 界面的大小。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---@return float, float 宽和高</span>
<span class="token keyword">function</span> UI<span class="token punctuation">:</span><span class="token function">getRootSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>返回的是服务器上定义的 UI 界面大小，例如在多人游戏中调用 <code>UI:getRootSize()</code> 会返回房主（或者云服务器）的 UI 界面大小。</p> <h3 id="ui-下的类之间的关系"><a href="#ui-下的类之间的关系" class="header-anchor">#</a> <code>UI</code> 下的类之间的关系</h3> <table><thead><tr><th style="text-align:center;">类名</th> <th style="text-align:center;">类描述</th> <th style="text-align:center;">父类</th> <th style="text-align:center;">具象</th></tr></thead> <tbody><tr><td style="text-align:center;">UIView</td> <td style="text-align:center;">UI 界面</td> <td style="text-align:center;">无</td> <td style="text-align:center;">√</td></tr> <tr><td style="text-align:center;">Element</td> <td style="text-align:center;">UI 元件</td> <td style="text-align:center;">无</td> <td style="text-align:center;">×</td></tr> <tr><td style="text-align:center;">Texture</td> <td style="text-align:center;">UI 图片</td> <td style="text-align:center;">Element</td> <td style="text-align:center;">√</td></tr> <tr><td style="text-align:center;">Button</td> <td style="text-align:center;">UI 按钮</td> <td style="text-align:center;">Texture</td> <td style="text-align:center;">√</td></tr> <tr><td style="text-align:center;">Label</td> <td style="text-align:center;">UI 文字</td> <td style="text-align:center;">Element</td> <td style="text-align:center;">√</td></tr> <tr><td style="text-align:center;">EditBox</td> <td style="text-align:center;">UI 输入框</td> <td style="text-align:center;">Label</td> <td style="text-align:center;">√</td></tr></tbody></table> <h3 id="ui-uiview"><a href="#ui-uiview" class="header-anchor">#</a> <code>UI.UIView</code></h3> <p>UI 界面，以下简称 <code>UIView</code> 。</p> <p>成员函数：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---构造一个 UIView 对象。</span>
<span class="token comment">---@param uiid string 指定该 UI 界面的 ID（不检查可用性）</span>
<span class="token comment">---@return UI.UIView</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>uiid<span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>函数返回值有缓存，如果 <code>uiid</code> 相同，返回之前构造的对象。</p> <p>成员变量：</p> <table><thead><tr><th style="text-align:center;">名称</th> <th style="text-align:center;">类型</th> <th style="text-align:center;">简介</th> <th style="text-align:center;">可读</th> <th style="text-align:center;">可写</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>id</code></td> <td style="text-align:center;"><code>string</code></td> <td style="text-align:center;">UI 界面 ID</td> <td style="text-align:center;">√</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;"><code>showEvent</code></td> <td style="text-align:center;"><code>function</code> | <code>nil</code></td> <td style="text-align:center;">界面显示时的回调</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td></tr> <tr><td style="text-align:center;"><code>hideEvent</code></td> <td style="text-align:center;"><code>function</code> | <code>nil</code></td> <td style="text-align:center;">界面隐藏时的回调（ PC 端可按下 <code>ESC</code> 触发）</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td></tr></tbody></table> <p>成员函数：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---打开 UI 界面。</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">[</span>playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---隐藏（关闭）UI 界面。</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">[</span>playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---修改该 UI 界面的所有子元件的状态。</span>
<span class="token comment">---@param state string 界面状态</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---构造一个 `UI.Texture` 对象。</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.Texture</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">newTexture</span><span class="token punctuation">(</span>elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---构造一个 `UI.Button` 对象。</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.Button</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">newButton</span><span class="token punctuation">(</span>elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---构造一个 `UI.Label` 对象。</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.Label</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">newLabel</span><span class="token punctuation">(</span>elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---构造一个 `UI.EditBox` 对象。</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.EditBox</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">newEditBox</span><span class="token punctuation">(</span>elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><h3 id="ui-element"><a href="#ui-element" class="header-anchor">#</a> <code>UI.Element</code></h3> <p>UI 元件，以下简称 <code>Element</code> 。</p> <p>该类是抽象类，不能直接构造 <code>Element</code> 对象，应构造 <code>Element</code> 子类的对象。</p> <p>成员变量：</p> <table><thead><tr><th style="text-align:center;">名称</th> <th style="text-align:center;">类型</th> <th style="text-align:center;">简介</th> <th style="text-align:center;">可读</th> <th style="text-align:center;">可写</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>uiView</code></td> <td style="text-align:center;"><code>UIView[]</code></td> <td style="text-align:center;">所属 UI 界面</td> <td style="text-align:center;">√</td> <td style="text-align:center;"></td></tr> <tr><td style="text-align:center;"><code>id</code></td> <td style="text-align:center;"><code>string</code></td> <td style="text-align:center;">元件 ID</td> <td style="text-align:center;">√</td> <td style="text-align:center;"></td></tr></tbody></table> <p>成员函数：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---显示元件。</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">[</span>playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---隐藏元件。</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">[</span>playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---显示或隐藏元件。</span>
<span class="token comment">---@param display boolean 为真，显示；否则，隐藏</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setDisplay</span><span class="token punctuation">(</span>display <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---修改元件状态。</span>
<span class="token comment">---@param state string 状态</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---修改元件位置。</span>
<span class="token comment">---@param x number 位置 x 坐标</span>
<span class="token comment">---@param y number 位置 y 坐标</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setPosition</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---修改元件大小。</span>
<span class="token comment">---@param width number 元件宽度</span>
<span class="token comment">---@param height number 元件高度</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setSize</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---将原始元件（旋转0°）绕其位置顺时针旋转 `angle` 度。</span>
<span class="token comment">---@param angle number 旋转度数</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setAngle</span><span class="token punctuation">(</span>angle <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---@param color integer 元件 RGB 颜色（ `0x000000` ~ `0xffffff` ）</span>
<span class="token comment">---修改元件颜色。</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setColor</span><span class="token punctuation">(</span>color <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---修改元件透明度。</span>
<span class="token comment">---@param alpha number 元件透明度（0为完全透明，100为完全不透明）</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Element<span class="token punctuation">:</span><span class="token function">setAlpha</span><span class="token punctuation">(</span>alpha <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><h3 id="ui-texture"><a href="#ui-texture" class="header-anchor">#</a> <code>UI.Texture</code></h3> <p>UI 图片元件，以下简称 <code>Texture</code> 。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---构造一个 Texture 对象。</span>
<span class="token comment">---@param uiview UI.UIView[] 所属界面</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.Texture</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Texture<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>uiview<span class="token punctuation">,</span> elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>等价于 <code>uiview:newTexture(elementid)</code> 。</p> <p>成员函数：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---修改图片纹理。</span>
<span class="token comment">---@param url string 图案纹理 ID</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Texture<span class="token punctuation">:</span><span class="token function">setTexture</span><span class="token punctuation">(</span>url <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>游戏内可以通过 “ID库” → “图片” 获取图案纹理 ID 。</p> <h3 id="ui-button"><a href="#ui-button" class="header-anchor">#</a> <code>UI.Button</code></h3> <p>UI 按钮元件，以下简称 <code>Button</code> 。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---构造一个 Button 对象。</span>
<span class="token comment">---@param uiview UI.UIView[] 所属界面</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.Button</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Button<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>uiview<span class="token punctuation">,</span> elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>等价于 <code>uiview:newButton(elementid)</code> 。</p> <p>成员变量：</p> <table><thead><tr><th style="text-align:center;">名称</th> <th style="text-align:center;">类型</th> <th style="text-align:center;">简介</th> <th style="text-align:center;">可读</th> <th style="text-align:center;">可写</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>pressEvent</code></td> <td style="text-align:center;"><code>function</code> | <code>nil</code></td> <td style="text-align:center;"><a href="/MiniExtendDoc/api/event.html#易混淆的事件">按下按钮</a>时的回调</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td></tr> <tr><td style="text-align:center;"><code>clickEvent</code></td> <td style="text-align:center;"><code>function</code> | <code>nil</code></td> <td style="text-align:center;"><a href="/MiniExtendDoc/api/event.html#易混淆的事件">点击按钮</a>时的回调</td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td></tr></tbody></table> <h3 id="ui-label"><a href="#ui-label" class="header-anchor">#</a> <code>UI.Label</code></h3> <p>UI 文字元件，以下简称 <code>Label</code> 。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---构造一个 Label 对象。</span>
<span class="token comment">---@param uiview UI.UIView[] 所属界面</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.Label</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Label<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>uiview<span class="token punctuation">,</span> elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>等价于 <code>uiview:newLabel(elementid)</code> 。</p> <p>成员函数：</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---修改显示文本。</span>
<span class="token comment">---@param text string 文本（不会被屏蔽，但不能太长）</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Label<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span>text <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>

<span class="token comment">---修改字体大小。</span>
<span class="token comment">---@param size integer 字体大小</span>
<span class="token comment">---@param playerid integer 目标玩家</span>
<span class="token comment">---@return boolean 是否成功</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>Label<span class="token punctuation">:</span><span class="token function">setFontSize</span><span class="token punctuation">(</span>size <span class="token punctuation">[</span><span class="token punctuation">,</span> playerid<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><h3 id="ui-editbox"><a href="#ui-editbox" class="header-anchor">#</a> <code>UI.EditBox</code></h3> <p>UI 输入框元件，以下简称 <code>EditBox</code> 。</p> <div class="language-lua extra-class"><pre class="language-lua"><code><span class="token comment">---构造一个 EditBox 对象。</span>
<span class="token comment">---@param uiview UI.UIView[] 所属界面</span>
<span class="token comment">---@param elementid string 元件 ID</span>
<span class="token comment">---@return UI.EditBox</span>
<span class="token keyword">function</span> UI<span class="token punctuation">.</span>EditBox<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>uiview<span class="token punctuation">,</span> elementid<span class="token punctuation">)</span> <span class="token keyword">end</span>
</code></pre></div><p>等价于 <code>uiview:newEditBox(elementid)</code> 。</p> <p>成员变量：</p> <table><thead><tr><th style="text-align:center;">名称</th> <th style="text-align:center;">类型</th> <th style="text-align:center;">简介</th> <th style="text-align:center;">可读</th> <th style="text-align:center;">可写</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>lostFocusEvent</code></td> <td style="text-align:center;"><a href="/MiniExtendDoc/api/event.html#易混淆的事件">输入框失去焦点</a>时的回调</td> <td style="text-align:center;"></td> <td style="text-align:center;">√</td> <td style="text-align:center;">√</td></tr></tbody></table> <p>回调传递的输入框内容，会先被和谐处理。</p> <h3 id="代码示例"><a href="#代码示例" class="header-anchor">#</a> 代码示例</h3> <h3 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h3> <p>已知一 UI 界面 <code>u</code> 下有一个输入框元件 <code>e</code> 和一个文字元件 <code>l</code> ，要求如下：</p> <ul><li>在玩家没有输入 <code>e</code> 时， <code>l</code> 总是显示 <code>&quot;输入 16 进制数&quot;</code> ，开始输入时 <code>e</code> 的内容清空 。</li> <li><code>e</code> 完成输入时，尝试将其解释为 16 进制数，并转化为 10 进制数，并将结果反应在 <code>l</code>上。</li> <li>如果输入不合法，无法将其转化，则设置 <code>l</code> 的文本为 <code>&quot;错误的输入&quot;</code> 。</li></ul> <h3 id="分析"><a href="#分析" class="header-anchor">#</a> 分析</h3> <ul><li>要在开始输入时清空 <code>e</code> 的内容，需要处理一个 <code>$ui.onClick</code> 事件。实现方法是再创建一个按钮元件，设为 <code>b</code> ，将 <code>e</code> 设为 <code>b</code> 的子集，调整 <code>b</code> 的外观并将使其刚好覆盖 <code>e</code> ，这样当玩家点击输入框开始输入时，也会触发按钮的点击事件(<code>clickEvent</code>)，这时就能修改 <code>e</code> 的内容了。</li> <li>经测试，当按钮被点击时焦点才会进入输入框，所以不要使用按下事件。</li> <li>使用 <code>tonumber(e [, base])</code> 函数来转化数字。</li></ul> <h3 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h3> <div class="language-lua extra-class"><pre class="language-lua"><code>Env<span class="token punctuation">.</span><span class="token function">__init__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">-- 需替换以下 id</span>
<span class="token keyword">local</span> uiview_id <span class="token operator">=</span> <span class="token string">[[]]</span>
<span class="token keyword">local</span> editBox_id <span class="token operator">=</span> <span class="token string">[[]]</span>
<span class="token keyword">local</span> label_id <span class="token operator">=</span> <span class="token string">[[]]</span>
<span class="token keyword">local</span> button_id <span class="token operator">=</span> <span class="token string">[[]]</span>
uiview <span class="token operator">=</span> UI<span class="token punctuation">.</span>UIView<span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span>uiview_id<span class="token punctuation">)</span>
editBox <span class="token operator">=</span> uiview<span class="token punctuation">:</span><span class="token function">newEditBox</span><span class="token punctuation">(</span>editBox_id<span class="token punctuation">)</span>
label <span class="token operator">=</span> uiview<span class="token punctuation">:</span><span class="token function">newLabel</span><span class="token punctuation">(</span>label_id<span class="token punctuation">)</span>
button <span class="token operator">=</span> uiview<span class="token punctuation">:</span><span class="token function">newButton</span><span class="token punctuation">(</span>button_id<span class="token punctuation">)</span>
<span class="token comment">-- 初始化</span>
<span class="token function">registerEvent</span><span class="token punctuation">(</span><span class="token string">[[Game.AnyPlayer.EnterGame]]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
	uiview<span class="token punctuation">:</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	label<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
	editBox<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;输入 16 进制数&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> button<span class="token punctuation">.</span><span class="token function">clickEvent</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
	<span class="token comment">-- 清空输入框</span>
	editBox<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span class="token keyword">function</span> editBox<span class="token punctuation">.</span><span class="token function">lostFocusEvent</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
	<span class="token keyword">local</span> num <span class="token operator">=</span> <span class="token function">tonumber</span><span class="token punctuation">(</span>param<span class="token punctuation">[</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> num <span class="token keyword">then</span>
		label<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">tostring</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">else</span>
		label<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;错误的输入&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">end</span>
	editBox<span class="token punctuation">:</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;输入 16 进制数&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/8/2023, 8:39:15 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/MiniExtendDoc/api/event.html" class="prev">
        事件管理 Event
      </a></span> <span class="next"><a href="/MiniExtendDoc/changelog.html">
        更新日志
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/MiniExtendDoc/assets/js/app.34877e6c.js" defer></script><script src="/MiniExtendDoc/assets/js/2.63c13255.js" defer></script><script src="/MiniExtendDoc/assets/js/14.67a40162.js" defer></script>
  </body>
</html>
