(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{279:function(v,_,t){"use strict";t.r(_);var e=t(13),i=Object(e.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"api-风格-约定"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#api-风格-约定"}},[v._v("#")]),v._v(" API 风格&约定")]),v._v(" "),_("h2",{attrs:{id:"代码规范"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#代码规范"}},[v._v("#")]),v._v(" 代码规范")]),v._v(" "),_("ul",[_("li",[v._v("MiniExtend 的所有函数都无法获得 "),_("code",[v._v("...")]),v._v(" 末尾的 "),_("code",[v._v("nil")]),v._v(" 。")]),v._v(" "),_("li",[v._v("使用 "),_("code",[v._v(".")]),v._v(" 访问作用域的静态函数，使用 "),_("code",[v._v(":")]),v._v(" 访问类函数。")]),v._v(" "),_("li",[v._v("未明确声明可写的成员变量，不要修改，否则可能导致错误。")]),v._v(" "),_("li",[v._v("未明确声明检查参数时，MiniExtend 不检查参数，因此请保证参数正确。")])]),v._v(" "),_("h2",{attrs:{id:"定义"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[v._v("#")]),v._v(" 定义")]),v._v(" "),_("h3",{attrs:{id:"脚本作用域"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#脚本作用域"}},[v._v("#")]),v._v(" 脚本作用域")]),v._v(" "),_("p",[v._v("脚本文件所处的位置叫做脚本文件的作用域。")]),v._v(" "),_("p",[v._v("所处的位置和脚本文件在文件结构上的位置有关，例如有的脚本文件在"),_("span",{attrs:{title:"这里包括子文件夹，后同"}},[v._v("地图文件夹")]),v._v("中，而有的在 UI 界面文件夹中。")]),v._v(" "),_("p",[v._v("所处的位置决定了脚本在什么时候执行，以及脚本执行时的环境，这就是定义它的意义。")]),v._v(" "),_("div",{staticClass:"custom-block warning"},[_("p",{staticClass:"custom-block-title"},[v._v("WARNING")]),v._v(" "),_("p",[v._v("不同的脚本作用域的 "),_("code",[v._v("_G")]),v._v(" 是不同的，所以"),_("strong",[v._v("不同作用域下的脚本是隔离的")]),v._v("，但有其它方式来让它们交流。")]),v._v(" "),_("p",[v._v("更多内容详见 "),_("code",[v._v("core.lua")]),v._v(" 。")])]),v._v(" "),_("p",[v._v("在 MiniExtend ，一般将作用域分为两类："),_("a",{attrs:{href:"#%E5%85%A8%E5%B1%80%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[v._v("全局作用域")]),v._v("、"),_("a",{attrs:{href:"#ui-%E4%BD%9C%E7%94%A8%E5%9F%9F"}},[v._v("UI 作用域")]),v._v("。")]),v._v(" "),_("h2",{attrs:{id:"全局作用域"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#全局作用域"}},[v._v("#")]),v._v(" 全局作用域")]),v._v(" "),_("p",[v._v("全局作用域下的脚本"),_("strong",[v._v("在脚本编辑器创建")]),v._v("。")]),v._v(" "),_("p",[v._v("该脚本文件位于地图文件夹中，其性质是该作用域下的文件总是在"),_("span",{attrs:{title:"这里指开发者可编辑的脚本，可能不包含插件包，这有待测试"}},[v._v("可见脚本")]),v._v("中最先执行。")]),v._v(" "),_("h2",{attrs:{id:"ui-作用域"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ui-作用域"}},[v._v("#")]),v._v(" UI 作用域")]),v._v(" "),_("p",[v._v("UI 作用域下的脚本"),_("strong",[v._v("在 UI 编辑器中创建")]),v._v("。")]),v._v(" "),_("p",[v._v("该脚本文件位于自定义 UI 界面文件夹中，其性质是该作用域下的文件晚于全局作用域下的脚本文件执行。")]),v._v(" "),_("p",[v._v("UI 作用域下的脚本可以使用 "),_("code",[v._v("ScriptSupportEvent")]),v._v(" 监听所属 UI 界面的事件，全局作用域和其它 UI 作用域无法使用 "),_("code",[v._v("ScriptSupportEvent")]),v._v(" 。")]),v._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[v._v("这可能很难理解")]),v._v(" "),_("p",[v._v("没关系！你只需知道如何区分全局作用域和 UI 作用域即可！")]),v._v(" "),_("p",[v._v("除非你是 MiniExtend 代码仓库贡献者，那样的话建议你理解它！")])]),v._v(" "),_("h3",{attrs:{id:"游戏帧"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#游戏帧"}},[v._v("#")]),v._v(" 游戏帧")]),v._v(" "),_("p",[v._v("游戏帧是游戏的基本事件单位，游戏帧从 0 开始（以下简称“帧”）。")]),v._v(" "),_("p",[v._v("游戏数据每帧改变一次。")]),v._v(" "),_("p",[v._v("从第 0 帧开始，平均每 "),_("strong",[v._v("0.05秒")]),v._v(" 会进入新的游戏帧。每个游戏帧的时长是无规律，不确定的，这可能与游戏的计算量有关。")]),v._v(" "),_("p",[v._v("可以近似的把 1 帧当做 0.05s ，但要知道它并不是真正的 0.05s 。记住，不要利用游戏帧来做精密的计时器，类似的功能可以用 "),_("code",[v._v("os.clock")]),v._v(" 替代。")]),v._v(" "),_("p",[v._v("对于延续性事件（例如玩家挖掘方块），每一帧会触发一次事件，这也体现了游戏帧的意义。")]),v._v(" "),_("h3",{attrs:{id:"genv"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#genv"}},[v._v("#")]),v._v(" "),_("code",[v._v("genv")])]),v._v(" "),_("p",[v._v("见 "),_("a",{attrs:{href:"https://github.com/Mini-World-Dev-Org/Mini-World-Wiki/wiki/script",target:"_blank",rel:"noopener noreferrer"}},[v._v("wiki"),_("OutboundLink")],1),v._v(" 。")]),v._v(" "),_("h3",{attrs:{id:"gscriptfenv"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#gscriptfenv"}},[v._v("#")]),v._v(" "),_("code",[v._v("_GScriptFenv_")])]),v._v(" "),_("p",[v._v("见 "),_("a",{attrs:{href:"https://github.com/Mini-World-Dev-Org/Mini-World-Wiki/wiki/script",target:"_blank",rel:"noopener noreferrer"}},[v._v("wiki"),_("OutboundLink")],1),v._v(" 。")]),v._v(" "),_("h3",{attrs:{id:"ui-事件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ui-事件"}},[v._v("#")]),v._v(" UI 事件")]),v._v(" "),_("p",[v._v("自定义 UI 中才会发生的事件，原生 UI 事件包括：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("UI.Show")])]),v._v(" "),_("li",[_("code",[v._v("UI.Hide")])]),v._v(" "),_("li",[_("code",[v._v("UI.Button.TouchBegin")])]),v._v(" "),_("li",[_("code",[v._v("UI.Button.Click")])]),v._v(" "),_("li",[_("code",[v._v("UI.LostFocus")])])]),v._v(" "),_("p",[v._v("对于原生 UI 事件，建议使用"),_("a",{attrs:{href:"/api/event#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E5%90%8D"}},[v._v("自定义事件")]),v._v("代替，提升代码可读性。")]),v._v(" "),_("h2",{attrs:{id:"代码示例"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#代码示例"}},[v._v("#")]),v._v(" 代码示例")]),v._v(" "),_("p",[v._v("本文档包含了一些代码示例，让它们正确运行的前提是你"),_("strong",[v._v("已经")]),v._v("搭建好 MiniExtend 环境，有的代码可能会有其它要求。")]),v._v(" "),_("div",{staticClass:"custom-block tip"},[_("p",{staticClass:"custom-block-title"},[v._v("TIP")]),v._v(" "),_("p",[v._v("对于 UI 示例，在代码开头会列出一些局部变量，表示 UI 界面或元件的 ID ，"),_("strong",[v._v("不要忘记替换它们")]),v._v("！")])]),v._v(" "),_("h2",{attrs:{id:"关键字"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#关键字"}},[v._v("#")]),v._v(" 关键字")]),v._v(" "),_("p",[v._v("以下是 MiniExtend 关键字，避免意外地使用它们作为自己的标识符，改变脚本添加的函数的意义不会影响 MiniExtend 的使用，但有的 API 可能会使用这些函数从而导致脚本无法正常运行。")]),v._v(" "),_("p",[v._v("全局函数：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("loadstring2")])]),v._v(" "),_("li",[_("code",[v._v("deepcopy")])]),v._v(" "),_("li",[_("code",[v._v("getTick")])]),v._v(" "),_("li",[_("code",[v._v("scheduleCall")])]),v._v(" "),_("li",[_("code",[v._v("nextTick")])]),v._v(" "),_("li",[_("code",[v._v("cancelScheduleCall")])]),v._v(" "),_("li",[_("code",[v._v("getObjectId")])]),v._v(" "),_("li",[_("code",[v._v("setObjectId")])]),v._v(" "),_("li",[_("code",[v._v("registerEvent")])]),v._v(" "),_("li",[_("code",[v._v("cancelRegisterEvent")])])]),v._v(" "),_("p",[v._v("全局表：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("genv")])]),v._v(" "),_("li",[_("code",[v._v("_G2")])])]),v._v(" "),_("p",[v._v("全局作用域、类：")]),v._v(" "),_("ul",[_("li",[_("code",[v._v("Env")])]),v._v(" "),_("li",[_("code",[v._v("Log")])]),v._v(" "),_("li",[_("code",[v._v("Timer")])]),v._v(" "),_("li",[_("code",[v._v("UI")])])])])}),[],!1,null,null,null);_.default=i.exports}}]);